<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="stylesheet" href="css/bootstrap.css">
		<script src="js/jquery.min.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<link rel="stylesheet" type="text/css" href="css/list_denglu.css"/>
		<link rel="stylesheet" type="text/css" href="css/fomm.css"/>
		<script type="text/javascript">
				// function fub(){//手机号获取焦点
				// 	span1.innerHTML='十 一位数字'
				// 	span1.style='border-radius:5px; color:#fff;font-size:12px;background:#00CD00; padding:2px 10px;'
					
				// }
				function sjyz(){//手机号码正则
					var $sj=sj.value;
					var reg=/^1[3-9]\d{9}$/;
					var result=reg.test($sj);
					if(result!==true){
						span1.innerHTML='手机号码格式不正确'
						span1.style='border-radius:5px; color:#fff;font-size:12px;background:red; padding:2px 10px;'			
						return ;
						
					}else{
						span1.innerHTML=''
						span1.style='background:#fff; '}
				}
				// function fub1(){//验证码获取焦点
				// 	span2.style='border-radius:5px; color:#fff;font-size:12px;background:#00CD00; padding:2px 10px;'
				// 	span2.innerHTML='四位数字'
				// }
				function sjyz1(){//验证码失去焦点的正则
					var $yz=yz.value;
					var reg1=/^[0-9]{4}$/;
					var yzz1=reg1.test($yz);
					if(yzz1!==true){
						span2.innerHTML='验证码格式不正确'
						span2.style='border-radius:5px; color:#fff;font-size:12px;background:red; padding:2px 10px;'
						return ;
					}else{
						span2.innerHTML=''
						span2.style='background:#fff; '}
				}
				// function fub2(){//密码获取焦点
				// 	span3.style='border-radius:5px; color:#fff;font-size:12px;background:#00CD00; padding:2px 10px;'
				// 	span3.innerHTML='8-16位字母或数字'
				// }
				function sjyz2(){//失去焦点的正则
					var $mi1=mi1.value;
					var reg2=/^.{8,16}$/;
					var mia1=reg2.test($mi1)
					if(mia1!==true){
						span3.innerHTML='密码格式不正确'
						span3.style='border-radius:5px; color:#fff;font-size:12px;background:red; padding:2px 10px;'
						return ;
					}else{
						span3.innerHTML=''
						span3.style='background:#fff; '}
				}
				function sjyz3(){//确认密码失去焦点
					var $mi1=mi1.value;
					var $mi2=mi2.value;
					if($mi1!=$mi2){
						span4.innerHTML='两次密码不一致'
						span4.style='border-radius:5px; color:#fff;font-size:12px;background:red; padding:2px 5px;'
						return ;
					}else{
						span4.innerHTML=''
						span4.style='background:#fff;'
					}
					
					
				}
				// 
				
				
				//提交
				function fun(){//传递参数
					var $sj=sj.value;//电话
					var $yz=yz.value;//验证码
					var $mi1=mi1.value;//密码
					var $mi2=mi2.value;//确认密码
					var $gj=gj.value; //国家
					var $gj1=gj1.value;//电话号码国家
					
					var $rq=rq.value;//获取时间
					var urq=new Date($rq).getTime()
						
					if($sj==''||$yz==''||$mi1==''||$mi2==''||$rq==''){
						alert('你有关键内容未提交,不能提交')
						return;
					}
					//
					if($mi1!=$mi2){
						span4.innerHTML='两次密码不一致'
						span4.style='border-radius:5px; color:#fff;font-size:12px;background:red; padding:2px 5px;'
						return ;
					}else{
						// span4.innerHTML=null
						span4.style='background:#fff;'
					}
					//查询账户是否被注册
					
					var xhr=new XMLHttpRequest();
					xhr.onreadystatechange=()=>{
						
							if(xhr.readyState==4&&xhr.status==200){
								var r=xhr.responseText;
								if(r==1){
									span1.innerHTML='你的手机号码已被注册'
									span1.style='border-radius:5px; color:#fff;font-size:12px;background:red; padding:2px 10px;'			
									return ;
								}else{
									
									fbb()
								}
							}
						}
					xhr.open('GET',`/hw_user/v1/user/${$sj}`,true)
					xhr.send(null)
					console.log('10259559820000')
					//提交注册数据
					function fbb(){
						var xhr=new XMLHttpRequest();
						xhr.onreadystatechange=()=>{
							console.log('8888888')
							if(xhr.readyState===4&&xhr.status===200){
								var r=xhr.responseText;
								if(r==1){
									alert('注册成功,马上去登录')
									location.href='list.html'
								}
							}
						}
						xhr.open('POST','/hw_user/v1/list',true)
						xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');						console.log('999999')
						var formdata=`the=${$gj}&poher=${$sj}&upwd=${$mi1}&dataof=${urq}`;
						xhr.send(formdata)
					}
					
					
				}
		
				
			
			 
		</script>
	</head>
	<body>
		<div class="index">
			<div class="daohang">
				<div class="img_box d-flex">
					<img src="image/list/HUAWEI.svg" alt="">
					<span class="mx-3">|</span>
					<span class="font_12 font-weight-bold">华为商城</span>
				</div>
			</div>	
			<!--  -->
			
			<div class="d-flex zhuche mt-5 mb-5">
				<div class="txt">
					<p class="m-0"><a class="ml-4 font_12" href=""><i class="mr-1 iconfont text-muted">&#xe603;</i>手机号注册</a></p>
					<p class="m-0"><a class="ml-4 font_12" href=""><i class="mr-2 iconfont text-muted">&#xe604;</i>邮件地址注册</a></p>
				</div>
				<div class="my_input_1 mt-4">
					<div>
						<p class="h4 m-0 text-center">华为帐号注册</p>
						<p class="text-center my-2 font_14">已有帐号，<a class="font_14" href="list.html"> 去登录></a></p>
					</div>
					<p class="mt-5  justify-content-between d-flex pr-2">
						<span class="font_14">国家/地区</span>
						<select id="gj" class=" xiala font_14">
							<option value ="中国">中国</option>
							<option value ="阿尔及利亚">阿尔及利亚</option>
							<option value ="阿富汗">阿富汗</option>
							<option value ="阿根廷">阿根廷</option>
							<option value ="爱尔兰">爱尔兰</option>
							<option value ="埃及">埃及</option>
							<option value ="埃塞俄比亚">埃塞俄比亚</option>
							<option value ="爱沙尼亚">爱沙尼亚</option>
							<option value ="阿拉伯联合酋长国">阿拉伯联合酋长国</option>
							<option value ="阿鲁巴">阿鲁巴</option>
							<option value ="美国">美国</option>
							
						</select>
					</p>
					<p class="dianj mb-2">
						<select id="gj1" class="xiala_1 xiala font_14" name="">
							<option value="中国">+86(中国)</option>
							<option value ="阿尔巴尼亚">+355(阿尔巴尼亚)</option>
							<option value ="阿尔及利亚">+213(阿尔及利亚)</option>
							<option value ="阿富汗">+93(阿富汗)</option>
							<option value ="阿根廷">+54(阿根廷)</option>
							<option value ="阿拉伯联合酋长国">+971(阿拉伯联合酋长国)</option>
							<option value ="阿曼">+968(阿曼)</option>
							<option value ="阿塞拜疆">+994(阿塞拜疆)</option>
						</select>
						<input onblur='sjyz()' onfocus='fub()' id="sj" type="text" placeholder="请输入手机号码" maxlength="11">	
					</p>
					<span id="span1" class="font_12" style="color: red;"></span>
					<p class="dianj d-flex justify-content-between pr-2 m-0 my-3">
						<input onblur='sjyz1()' onfocus='fub1()' id="yz" type="text" placeholder="短信验证码">
						<a class="font_14 " href="">获取验证码</a>
					</p>
					<span id="span2" class="font_12" style="color: red;"></span>
					<p class="dianj m-0 my-3">
						<input onblur='sjyz2()' onfocus='fub2()' id="mi1" type="password" placeholder="密码" >
						<a href="">
							<img src="" alt="">
						</a>
					</p>
					<span id="span3" class="" style="color: red;"></span>
					<p class="dianj m-0 my-3">
						<input onblur='sjyz3()' onfocus='fub3()'   id="mi2" type="password" placeholder="确认密码">
						<a href="">
							<img src="" alt="">
						</a>
					</p>
					<span id="span4" class="" style="color: red;"></span>
					<p class="d-flex justify-content-between pr-2">
						<span class="font_14">出生日期</span>
						<span>
							<input id="rq" type="date" class="font_14">
						</span>
					</p>
					<div class="nav mt-4"><button onclick="fun()" class="box__ btn " type="button">注册</button></div>
				</div>
			</div>
			
			<!--  -->
			<div class="pt-4 hbiou">
				<p class="text-center href">
					<a class="font_12" href="">华为帐号与云空间用户协议</a>
					<span class="mx-2 text-muted">|</span>
					<a class="font_12" href="">关于华为帐号与云空间隐私的声明</a>
					<span class="mx-2 text-muted">|</span>
					<a class="font_12" href="">常见问题</a>
					<span class="mx-2 text-muted">|</span>
					<a class="font_12" href="">Cookies</a>
				</p>
				<p class="font_12 text-center text-muted">Copyright © 2011-2020  华为软件技术有限公司  版权所有  保留一切权利  苏B2-20070200号 | 苏ICP备09062682号-9</p>
			</div>
		</div>
	</body>
</html>